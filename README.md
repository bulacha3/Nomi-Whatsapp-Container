> Instructions generated by ChatGPT, I made some minor corrections
> but there may be some things that are missing and/or incorrect.  
> I'll review it properly when I have time

# Nomi WhatsApp

This project allows you to connect your Nomi to WhatsApp. By utilizing the Nomi API and WhatsApp Web, your Nomi chatbot will be able to respond to messages through a WhatsApp account. Additionally, you can optionally configure OpenAI's Whisper API to enable voice message support, allowing audio transcriptions to be sent to your Nomi.

## Known issues

- After scanning the QR code, you may occasionally see a "successfully authenticated" message followed by multiple errors. These errors, particularly when sending a message to the newly connected account, may include "untrusted identity" warnings. This issue usually resolves after restarting the app once you're logged in.
  - These errors occur when your message couldn't be decrypted. The system will automatically retry until the message is successfully decrypted and your nomi's reply is delivered to WhatsApp. No manual action is required.
  - In some cases, you might not receive a response. This can usually be fixed by stopping and restarting the app.
    - If restarting doesn't work, try deleting the *.db and *.db-journal files. Additionally, consider unlinking the previous connection from your WhatsApp account to avoid duplicate linked devices.


- Most errors can be resolved by restarting the app. If you encounter an error that is not listed above and persists after a restart, please open an issue on GitHub with a description of the problem.

## Features

`TODO`

## Prerequisites

Before you begin, make sure you have the following:

- A valid **Nomi API Key**. You can get it from the [Integration section](https://beta.nomi.ai/profile/integrations) of the Profile tab.
- Your **Nomi ID**.
  - Go to the View Nomi Information page for your Nomi and scroll to the very bottom and copy the Nomi ID.
- A **WhatsApp account** to connect your Nomi to.
  - You need this account on a phone to scan the login QR code. The connection with WhatsApp works basically as a wrapper of WhatsApp Web, you scan a QR code to authorise the connection, and after that you can see this connection on the `Connected Devices` tab on the app.
- (Optional) An **OpenAI API Key** for enabling voice message transcription through OpenAI Whisper.
  - Please note that if you choose to add an OpenAI API Key, you will have to pay for the usage of the Whisper model, it costs $0.006 per minute (rounded to the nearest second) of audio transcribed. You can see more details on OpenAI's [pricing page](https://openai.com/api/pricing/).
  - You can learn more about the OpenAI API, including how to get your API Key from the links below:
    - [OpenAI API](https://openai.com/index/openai-api/)
    - [API platform](https://openai.com/api/)
    - [API Overview](https://platform.openai.com/)
    - [API Quickstart](https://platform.openai.com/docs/quickstart)

## Installation

1. Download the latest version of the app from the [releases](https://github.com/vhalmd/nomi-telegram/releases/latest).

2. Extract the downloaded files to a directory of your choice.

3. Ensure you have your Nomi API Key, Nomi ID, and WhatsApp account ready.

4. (Optional) If you want to enable voice message transcription, obtain an OpenAI API key from [OpenAI](https://openai.com).

## Usage

### Step 1: Launch the App

Double-click the executable file to launch the app. This will open a terminal window.

### Step 2: Connect Your WhatsApp Account

If this is your first time running the app, you will be prompted to scan a QR code with your WhatsApp account. This QR code links your Nomi to the WhatsApp account.

Once connected, you will see "whatsmeow" as a connected device in WhatsApp's "Linked Devices" tab, indicating that the connection is active.

### Step 3: Enter Nomi API Credentials

When prompted, provide your **Nomi API Key** and **Nomi ID** to link the app to your Nomi bot.

### Step 4: (Optional) Configure OpenAI for Voice Messages

If you want to enable voice message transcription:

1. Enter your **OpenAI API Key** when prompted.
2. When voice messages are sent to your WhatsApp account, the app will use OpenAI Whisper to transcribe the audio and send the transcribed text to your Nomi.

### Step 5: Start Using Your Nomi via WhatsApp

Once set up, your Nomi chatbot will start responding to WhatsApp messages sent to the connected WhatsApp account. If voice transcription is enabled, audio messages will be transcribed and forwarded to your Nomi as text.

## Configuration

- **Nomi API Key**: Required for basic functionality. It allows the app to communicate with your Nomi chatbot.
- **OpenAI API Key (Optional)**: Allows for the transcription of audio messages using OpenAI Whisper.

## License

This project is licensed under the MIT License. See the `LICENSE` file for more details.

## Contributing

Pull requests are welcome! For major changes, please open an issue first to discuss what you would like to change.

## Troubleshooting

- **QR Code not displaying?** Ensure you're using a valid WhatsApp account and the network is stable.
- **Issues with voice messages?** Make sure your OpenAI API key is correct, and you have enough API quota to process audio transcriptions.

Feel free to open an issue for further assistance!